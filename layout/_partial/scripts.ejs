<%

function custom_inject() {
  var el = '';
  for (let item of (config.inject?.script || [])) {
    el += item;
  }
  for (let item of (theme.inject?.script || [])) {
    el += item;
  }
  for (let item of (page.inject?.script || [])) {
    el += item;
  }
  return el;
}

%>
<%- partial('scripts/defines') %>
<%- partial('scripts/utils') %>
<%- partial('scripts/sidebar') %>
<%- partial('scripts/tagtree') %>

<!-- required -->
<script src="<%- url_for(`${theme.stellar.main_js}?v=${stellar_info('version')}`) %>" defer></script>

<%- partial('scripts/theme') %>

<!-- optional -->
<%- partial('comments/script') %>

<%- partial('scripts/services') %>
<%- partial('../_plugins/index') %>

<!-- inject -->
<%- custom_inject() %>

<% if (theme.stellar.plugins?.echarts) { %>
<script src="<%- theme.stellar.plugins.echarts %>"></script>
<% } %>
<% if (theme.stellar.services?.heatmap) { %>
<script src="<%- theme.stellar.services.heatmap %>"></script>
<% } %>

<!-- 51LA统计 -->
<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"3LuGrhNZkG75ieAi",ck:"3LuGrhNZkG75ieAi"})</script>
